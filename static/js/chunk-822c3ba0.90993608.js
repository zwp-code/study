(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-822c3ba0"],{"057f":function(t,e,n){var r=n("c6b6"),a=n("fc6a"),i=n("241c").f,o=n("4dae"),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(t){try{return i(t)}catch(e){return o(s)}};t.exports.f=function(t){return s&&"Window"==r(t)?c(t):i(a(t))}},"0b42":function(t,e,n){var r=n("da84"),a=n("e8b5"),i=n("68ee"),o=n("861d"),s=n("b622"),c=s("species"),u=r.Array;t.exports=function(t){var e;return a(t)&&(e=t.constructor,i(e)&&(e===u||a(e.prototype))?e=void 0:o(e)&&(e=e[c],null===e&&(e=void 0))),void 0===e?u:e}},"159b":function(t,e,n){var r=n("da84"),a=n("fdbc"),i=n("785a"),o=n("17c2"),s=n("9112"),c=function(t){if(t&&t.forEach!==o)try{s(t,"forEach",o)}catch(e){t.forEach=o}};for(var u in a)a[u]&&c(r[u]&&r[u].prototype);c(i)},"17c2":function(t,e,n){"use strict";var r=n("b727").forEach,a=n("a640"),i=a("forEach");t.exports=i?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},"1dde":function(t,e,n){var r=n("d039"),a=n("b622"),i=n("2d00"),o=a("species");t.exports=function(t){return i>=51||!r((function(){var e=[],n=e.constructor={};return n[o]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"2fc2":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home scrollbar",staticStyle:{"background-color":"#f4f4f4"},on:{scroll:t.handleScroll}},[n("van-nav-bar",{attrs:{title:"人员管理","left-text":"","left-arrow":"",fixed:"","safe-area-inset-top":"",placeholder:""},on:{"click-left":t.onClickLeft},scopedSlots:t._u([{key:"right",fn:function(){return[n("div",{staticStyle:{"margin-top":"5px"}},[n("van-icon",{staticStyle:{"margin-right":"10px"},attrs:{name:"add-o",size:"18"},on:{click:function(e){t.editMask=!0}}})],1)]},proxy:!0}])}),t.isError||t.loading||t.editMask?t._e():n("div",{staticStyle:{"margin-top":"10px","min-height":"100%",position:"relative"}},[n("van-pull-refresh",{staticClass:"full-w",staticStyle:{position:"absolute",height:"auto","min-height":"100%"},on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了","error-text":"加载失败",offset:"100"},on:{load:t.onLoad},model:{value:t.isloading,callback:function(e){t.isloading=e},expression:"isloading"}},[n("ul",t._l(t.listData,(function(e,r){return n("li",{key:e.objectId,staticClass:"item"},[n("div",{staticClass:"item-box"},[n("span",[n("van-image",{staticStyle:{"margin-top":"1px"},attrs:{src:e.avatar?e.avatar:t.sex(e.sex),width:"30",height:"30",round:"",fit:"cover"}})],1),n("span",{staticStyle:{flex:"9","margin-left":"10px"}},[n("div",{staticStyle:{display:"flex","align-items":"center"}},[t._v(t._s(e.nickname)+" "),n("van-tag",{staticStyle:{"margin-left":"4px"},attrs:{type:t.identityType(e.identity)}},[t._v(t._s(t.checkIdentity(e.identity)))]),n("div",{staticStyle:{flex:"8"}}),n("van-icon",{staticStyle:{"margin-right":"10px"},attrs:{name:"edit"},on:{click:function(n){t.editMask=!0,t.editUserData=e,t.userData=e}}}),n("van-icon",{attrs:{name:"delete"},on:{click:function(n){return n.stopPropagation(),t.deleteRes(e.objectId,r)}}})],1),n("p",{staticStyle:{"font-size":"12px",color:"#b2b2b2"}},[t._v("加入时间："+t._s(e.createdAt))]),n("div",{staticClass:"item-content"},[t._v("ObjectID："+t._s(e.objectId))]),n("div",{staticClass:"item-content"},[t._v("账号："+t._s(e.username))])])])])})),0)])],1)],1),n("van-action-sheet",{attrs:{actions:t.actions,"cancel-text":"取消",description:"用户身份","close-on-click-action":""},on:{select:t.handleSelect},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}}),t.loading||t.isError&&!t.editMask?n("div",{staticClass:"center-layout"},[t.loading?n("van-loading",{attrs:{color:"#ff8000"}}):t._e(),t.isError?n("van-empty",{attrs:{image:"network",description:"加载失败"}},[n("van-button",{staticClass:"bottom-button",attrs:{round:"",color:"#f38aa7"},on:{click:t.getResData}},[t._v("重新刷新")])],1):t._e()],1):t._e(),t.editMask?n("div",{staticStyle:{height:"calc(100% - 46px)","background-color":"#fafafa"}},[n("van-form",{on:{submit:t.onSaveSubmit}},[n("van-field",{attrs:{name:"账号",label:"账号",autocomplete:"off",placeholder:"请输入账号",maxlength:"10",rules:[{required:!0,message:"请填写账号"}]},model:{value:t.userData.username,callback:function(e){t.$set(t.userData,"username",e)},expression:"userData.username"}}),t.editUserData?t._e():n("van-field",{attrs:{name:"密码",label:"密码",autocomplete:"off",placeholder:"请输入密码",maxlength:"16",rules:[{required:!0,message:"请填写密码"}]},model:{value:t.userData.password,callback:function(e){t.$set(t.userData,"password",e)},expression:"userData.password"}}),n("van-field",{attrs:{name:"昵称",label:"昵称",autocomplete:"off",placeholder:"请输入昵称",maxlength:"10",rules:[{required:!0,message:"请填写昵称"}]},model:{value:t.userData.nickname,callback:function(e){t.$set(t.userData,"nickname",e)},expression:"userData.nickname"}}),n("van-field",{attrs:{name:"radio",label:"性别"},scopedSlots:t._u([{key:"input",fn:function(){return[n("van-radio-group",{attrs:{direction:"horizontal"},model:{value:t.userData.sex,callback:function(e){t.$set(t.userData,"sex",e)},expression:"userData.sex"}},[n("van-radio",{attrs:{name:!0,"checked-color":"#e7b8b8"}},[t._v("男")]),n("van-radio",{attrs:{name:!1,"checked-color":"#e7b8b8"}},[t._v("女")])],1)]},proxy:!0}],null,!1,3603839443)}),n("van-field",{attrs:{name:"用户身份",clickable:"",value:t.checkIdentity(t.userData.identity),label:"用户身份",placeholder:"请选择用户身份"},on:{click:function(e){t.show=!0}}}),n("van-field",{attrs:{name:"switch",label:"是否启用"},scopedSlots:t._u([{key:"input",fn:function(){return[n("van-switch",{attrs:{size:"20"},model:{value:t.userData.isEnable,callback:function(e){t.$set(t.userData,"isEnable",e)},expression:"userData.isEnable"}})]},proxy:!0}],null,!1,3004154463)}),n("div",{staticClass:"block-btn"},[n("van-button",{staticClass:"van-edit",attrs:{type:"primary",block:"",color:"linear-gradient(to right,#e7b8b8, #f38aa7)","native-type":"submit"}},[t._v("保存")]),n("van-button",{staticClass:"van-edit",attrs:{block:"",type:"default"},on:{click:t.canceledit}},[t._v("取消")])],1)],1)],1):t._e()],1)},a=[],i=n("5530"),o=(n("b0c0"),n("ac1f"),n("5319"),n("7db0"),n("d3b7"),n("159b"),n("a434"),n("2241")),s=n("2f62"),c={name:"personnel",components:{},props:{},data:function(){return{listData:[],loading:!0,isError:!1,refreshing:!1,isloading:!1,finished:!1,pagesize:20,scroll:0,editUserData:null,show:!1,actions:[{name:"班主任",id:"0",subname:"拥有发布，编辑所有，删除所有，收藏所有，置顶所有，隐藏所有，查看所有资源以及人员管理，公告管理的权限"},{name:"班长",id:"1",subname:"拥有发布，收藏所有，置顶所有，隐藏所有，查看所有资源以及编辑，删除自己资源的权限"},{name:"学习委员",id:"2",subname:"拥有发布，收藏所有，查看所有资源以及隐藏，编辑，删除自己资源的权限"},{name:"学生",id:"3",subname:"拥有收藏所有，查看所有资源的权限"}],editMask:!1,userData:{nickname:"",username:"",password:"",sex:!1,identity:"3",isEnable:!1}}},computed:Object(i["a"])({},Object(s["c"])(["scrollTo"])),watch:{},created:function(){var t=this;if(this.scrollTo>0)var e=setInterval((function(){t.listData.length>0&&(document.querySelector(".home").scrollTo(0,t.scrollTo),clearInterval(e))}),50)},beforeRouteEnter:function(t,e,n){n((function(t){"home"===e.name&&(t.$store.state.scrollTo=0)}))},mounted:function(){this.getResData()},methods:Object(i["a"])(Object(i["a"])({},Object(s["b"])({add:"ADD"})),{},{onSaveSubmit:function(){var t=this;if(this.editUserData){var e=this.$Bmob.Query("_User");e.set("id",this.editUserData.objectId),e.set("identity",this.userData.identity),e.set("username",this.userData.username),e.set("sex",this.userData.sex),e.set("isEnable",this.userData.isEnable),e.set("nickname",this.userData.nickname),e.save().then((function(e){console.log(e),t.$notify({type:"success",message:"编辑成功"}),t.canceledit()})).catch((function(e){t.$notify({type:"danger",message:"编辑失败"})}))}else this.$Bmob.User.register(this.userData).then((function(e){t.$notify({type:"success",message:"添加成功"}),t.canceledit()})).catch((function(e){t.$notify({type:"danger",message:"添加失败"})}))},handleSelect:function(t){this.userData.identity=t.id},canceledit:function(){this.userData={nickname:"",username:"",password:"",sex:!1,identity:"3",isEnable:!1},this.editMask=!1,this.editUserData=null,this.refreshing=!0,this.onLoad()},open:function(t,e){this.$router.replace({name:"detail",query:{oid:t,title:e,type:"resources"}})},onRefresh:function(){this.finished=!1,this.isloading=!0,this.loading=!0,this.onLoad()},onLoad:function(){var t=this;this.refreshing&&(this.listData.length=0,this.refreshing=!1),setTimeout((function(){t.getResData()}),500)},getResData:function(){var t=this;this.loading=!0;var e=this.$Bmob.Query("_User");return e.limit(this.pagesize),e.skip(this.listData.length),e.order("identity","-createdAt"),e.find().then((function(e){e.forEach((function(e){t.listData.push(e)})),t.loading=!1,t.isError=!1,e.length===t.pagesize?(t.isloading=!1,t.finished=!1,t.refreshing=!1):(t.finished=!0,t.isloading=!1,t.refreshing=!1)})).catch((function(e){t.loading=!1,t.isError=!0}))},deleteRes:function(t,e){var n=this;o["a"].confirm({title:"提示",message:"确定要删除该用户吗"}).then((function(){var r=n.$Bmob.Query("_User");r.destroy(t).then((function(t){n.$notify({type:"success",message:"删除成功"}),n.listData.splice(e,1)})).catch((function(t){n.$notify({type:"danger",message:"删除失败"})}))})).catch((function(){}))},handleScroll:function(t){this.scroll=t.srcElement.scrollTop,this.add(this.scroll)}})},u=c,f=u,l=(n("3ee9"),n("2877")),d=Object(l["a"])(f,r,a,!1,null,"e2d74152",null);e["default"]=d.exports},"3ee9":function(t,e,n){"use strict";n("ee00")},"428f":function(t,e,n){var r=n("da84");t.exports=r},"4de4":function(t,e,n){"use strict";var r=n("23e7"),a=n("b727").filter,i=n("1dde"),o=i("filter");r({target:"Array",proto:!0,forced:!o},{filter:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},5530:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("b64b"),n("a4d3"),n("4de4"),n("d3b7"),n("e439"),n("159b"),n("dbb4");function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},"65f0":function(t,e,n){var r=n("0b42");t.exports=function(t,e){return new(r(t))(0===e?0:e)}},"746f":function(t,e,n){var r=n("428f"),a=n("1a2d"),i=n("e538"),o=n("9bf2").f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});a(e,t)||o(e,t,{value:i.f(t)})}},"7db0":function(t,e,n){"use strict";var r=n("23e7"),a=n("b727").find,i=n("44d2"),o="find",s=!0;o in[]&&Array(1)[o]((function(){s=!1})),r({target:"Array",proto:!0,forced:s},{find:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),i(o)},a434:function(t,e,n){"use strict";var r=n("23e7"),a=n("da84"),i=n("23cb"),o=n("5926"),s=n("07fa"),c=n("7b0b"),u=n("65f0"),f=n("8418"),l=n("1dde"),d=l("splice"),h=a.TypeError,b=Math.max,p=Math.min,v=9007199254740991,m="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!d},{splice:function(t,e){var n,r,a,l,d,g,y=c(this),w=s(y),x=i(t,w),k=arguments.length;if(0===k?n=r=0:1===k?(n=0,r=w-x):(n=k-2,r=p(b(o(e),0),w-x)),w+n-r>v)throw h(m);for(a=u(y,r),l=0;l<r;l++)d=x+l,d in y&&f(a,l,y[d]);if(a.length=r,n<r){for(l=x;l<w-r;l++)d=l+r,g=l+n,d in y?y[g]=y[d]:delete y[g];for(l=w;l>w-r+n;l--)delete y[l-1]}else if(n>r)for(l=w-r;l>x;l--)d=l+r-1,g=l+n-1,d in y?y[g]=y[d]:delete y[g];for(l=0;l<n;l++)y[l+x]=arguments[l+2];return y.length=w-r+n,a}})},a4d3:function(t,e,n){"use strict";var r=n("23e7"),a=n("da84"),i=n("d066"),o=n("2ba4"),s=n("c65b"),c=n("e330"),u=n("c430"),f=n("83ab"),l=n("4930"),d=n("d039"),h=n("1a2d"),b=n("e8b5"),p=n("1626"),v=n("861d"),m=n("3a9b"),g=n("d9b5"),y=n("825a"),w=n("7b0b"),x=n("fc6a"),k=n("a04b"),D=n("577e"),O=n("5c6c"),S=n("7c73"),j=n("df75"),E=n("241c"),_=n("057f"),P=n("7418"),$=n("06cf"),C=n("9bf2"),I=n("37e8"),A=n("d1e7"),T=n("f36a"),M=n("6eeb"),R=n("5692"),U=n("f772"),z=n("d012"),q=n("90e3"),B=n("b622"),L=n("e538"),N=n("746f"),J=n("d44e"),Q=n("69f3"),F=n("b727").forEach,W=U("hidden"),X="Symbol",G="prototype",H=B("toPrimitive"),K=Q.set,V=Q.getterFor(X),Y=Object[G],Z=a.Symbol,tt=Z&&Z[G],et=a.TypeError,nt=a.QObject,rt=i("JSON","stringify"),at=$.f,it=C.f,ot=_.f,st=A.f,ct=c([].push),ut=R("symbols"),ft=R("op-symbols"),lt=R("string-to-symbol-registry"),dt=R("symbol-to-string-registry"),ht=R("wks"),bt=!nt||!nt[G]||!nt[G].findChild,pt=f&&d((function(){return 7!=S(it({},"a",{get:function(){return it(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=at(Y,e);r&&delete Y[e],it(t,e,n),r&&t!==Y&&it(Y,e,r)}:it,vt=function(t,e){var n=ut[t]=S(tt);return K(n,{type:X,tag:t,description:e}),f||(n.description=e),n},mt=function(t,e,n){t===Y&&mt(ft,e,n),y(t);var r=k(e);return y(n),h(ut,r)?(n.enumerable?(h(t,W)&&t[W][r]&&(t[W][r]=!1),n=S(n,{enumerable:O(0,!1)})):(h(t,W)||it(t,W,O(1,{})),t[W][r]=!0),pt(t,r,n)):it(t,r,n)},gt=function(t,e){y(t);var n=x(e),r=j(n).concat(Dt(n));return F(r,(function(e){f&&!s(wt,n,e)||mt(t,e,n[e])})),t},yt=function(t,e){return void 0===e?S(t):gt(S(t),e)},wt=function(t){var e=k(t),n=s(st,this,e);return!(this===Y&&h(ut,e)&&!h(ft,e))&&(!(n||!h(this,e)||!h(ut,e)||h(this,W)&&this[W][e])||n)},xt=function(t,e){var n=x(t),r=k(e);if(n!==Y||!h(ut,r)||h(ft,r)){var a=at(n,r);return!a||!h(ut,r)||h(n,W)&&n[W][r]||(a.enumerable=!0),a}},kt=function(t){var e=ot(x(t)),n=[];return F(e,(function(t){h(ut,t)||h(z,t)||ct(n,t)})),n},Dt=function(t){var e=t===Y,n=ot(e?ft:x(t)),r=[];return F(n,(function(t){!h(ut,t)||e&&!h(Y,t)||ct(r,ut[t])})),r};if(l||(Z=function(){if(m(tt,this))throw et("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?D(arguments[0]):void 0,e=q(t),n=function(t){this===Y&&s(n,ft,t),h(this,W)&&h(this[W],e)&&(this[W][e]=!1),pt(this,e,O(1,t))};return f&&bt&&pt(Y,e,{configurable:!0,set:n}),vt(e,t)},tt=Z[G],M(tt,"toString",(function(){return V(this).tag})),M(Z,"withoutSetter",(function(t){return vt(q(t),t)})),A.f=wt,C.f=mt,I.f=gt,$.f=xt,E.f=_.f=kt,P.f=Dt,L.f=function(t){return vt(B(t),t)},f&&(it(tt,"description",{configurable:!0,get:function(){return V(this).description}}),u||M(Y,"propertyIsEnumerable",wt,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!l,sham:!l},{Symbol:Z}),F(j(ht),(function(t){N(t)})),r({target:X,stat:!0,forced:!l},{for:function(t){var e=D(t);if(h(lt,e))return lt[e];var n=Z(e);return lt[e]=n,dt[n]=e,n},keyFor:function(t){if(!g(t))throw et(t+" is not a symbol");if(h(dt,t))return dt[t]},useSetter:function(){bt=!0},useSimple:function(){bt=!1}}),r({target:"Object",stat:!0,forced:!l,sham:!f},{create:yt,defineProperty:mt,defineProperties:gt,getOwnPropertyDescriptor:xt}),r({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:kt,getOwnPropertySymbols:Dt}),r({target:"Object",stat:!0,forced:d((function(){P.f(1)}))},{getOwnPropertySymbols:function(t){return P.f(w(t))}}),rt){var Ot=!l||d((function(){var t=Z();return"[null]"!=rt([t])||"{}"!=rt({a:t})||"{}"!=rt(Object(t))}));r({target:"JSON",stat:!0,forced:Ot},{stringify:function(t,e,n){var r=T(arguments),a=e;if((v(e)||void 0!==t)&&!g(t))return b(e)||(e=function(t,e){if(p(a)&&(e=s(a,this,t,e)),!g(e))return e}),r[1]=e,o(rt,null,r)}})}if(!tt[H]){var St=tt.valueOf;M(tt,H,(function(t){return s(St,this)}))}J(Z,X),z[W]=!0},a640:function(t,e,n){"use strict";var r=n("d039");t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){throw 1},1)}))}},b0c0:function(t,e,n){var r=n("83ab"),a=n("5e77").EXISTS,i=n("e330"),o=n("9bf2").f,s=Function.prototype,c=i(s.toString),u=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,f=i(u.exec),l="name";r&&!a&&o(s,l,{configurable:!0,get:function(){try{return f(u,c(this))[1]}catch(t){return""}}})},b64b:function(t,e,n){var r=n("23e7"),a=n("7b0b"),i=n("df75"),o=n("d039"),s=o((function(){i(1)}));r({target:"Object",stat:!0,forced:s},{keys:function(t){return i(a(t))}})},b727:function(t,e,n){var r=n("0366"),a=n("e330"),i=n("44ad"),o=n("7b0b"),s=n("07fa"),c=n("65f0"),u=a([].push),f=function(t){var e=1==t,n=2==t,a=3==t,f=4==t,l=6==t,d=7==t,h=5==t||l;return function(b,p,v,m){for(var g,y,w=o(b),x=i(w),k=r(p,v),D=s(x),O=0,S=m||c,j=e?S(b,D):n||d?S(b,0):void 0;D>O;O++)if((h||O in x)&&(g=x[O],y=k(g,O,w),t))if(e)j[O]=y;else if(y)switch(t){case 3:return!0;case 5:return g;case 6:return O;case 2:u(j,g)}else switch(t){case 4:return!1;case 7:u(j,g)}return l?-1:a||f?f:j}};t.exports={forEach:f(0),map:f(1),filter:f(2),some:f(3),every:f(4),find:f(5),findIndex:f(6),filterReject:f(7)}},dbb4:function(t,e,n){var r=n("23e7"),a=n("83ab"),i=n("56ef"),o=n("fc6a"),s=n("06cf"),c=n("8418");r({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(t){var e,n,r=o(t),a=s.f,u=i(r),f={},l=0;while(u.length>l)n=a(r,e=u[l++]),void 0!==n&&c(f,e,n);return f}})},e439:function(t,e,n){var r=n("23e7"),a=n("d039"),i=n("fc6a"),o=n("06cf").f,s=n("83ab"),c=a((function(){o(1)})),u=!s||c;r({target:"Object",stat:!0,forced:u,sham:!s},{getOwnPropertyDescriptor:function(t,e){return o(i(t),e)}})},e538:function(t,e,n){var r=n("b622");e.f=r},e8b5:function(t,e,n){var r=n("c6b6");t.exports=Array.isArray||function(t){return"Array"==r(t)}},ee00:function(t,e,n){}}]);